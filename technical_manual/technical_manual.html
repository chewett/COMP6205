
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">

	<title>COMP6205 Assignment Brief</title>

	<!-- Bootstrap core CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">

	<!-- CSS for the assignment Brief -->
	<link href="css/brief.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	<script src="js/html5shiv.min.js"></script>
	<script src="js/respond.min.js"></script>
	<![endif]-->
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand active" href="#thing">COMP6205 Thing</a>
		</div>
		<div class="collapse navbar-collapse">
			<ul class="nav navbar-nav">
				<li><a href="#Thing">Thing</a></li>
			</ul>
		</div>
	</div>
</div>

<div class="container">

	<div class="main_content">

		<div class="page-header">
			<h1 id="Thing">COMP6205 Thing</h1>
		</div>
		<h2> <u>Doctrine</u> </h2>
			<h3> Server side validation (SQL Inject)</h3>
			<h3> Database schema (ORM) </h3>
			<p>
				<img class="img-responsive" src="images/ER_diagram.png" />
			</p>
			<h3> Transaction consistency, ACID properties </h3>
			<h3> Criticial evaluation </h3>
		<h2> <u>Role based authentication</u> </h2>
			<h3> Roles </h3>
			<h3> Permissions </h3>
			<h3> RoleHasPermissions </h3>
		<h2> Bootstrap</h2>
			<h3> Responsive site, working on mobile devices </h3>
			<h3> Input client side validation </h3>
		<h2> Unit Tests</h2>
			<p>
				To ensure that we do not introduce bugs we have written a number of unit tests to exhaustively test the functions and main parts of the website.
				As part of our development process it was recommended to run these tests before each commit so that we could fix any problems we caused in the commit before it committed.
			</p>
			<p>
				These tests were written using the phpunit framework and all tests can be found in the <code>unittests</code> directory.
				Theses tests could be run with <code>phpunit .</code>. An example of what the output looks like when ran is below.
			</p>
			<p>
				<img class="img-responsive" src="images/phpunit.png" />
			</p>
			<p>
				An example test written to test our permission function is reproduced below.
				The full source code for this file is available in <code>unittests/HashingFunctionTest.php</code>
			</p>
			<p>
<pre>/**
 * This tests the verifyLoginPassword function to see if it will verify valid and invalid passwords
 * @depends testGenerateHashIsUnique
 * @param $hashs a list of hashes generated above with the password "Easy_Password"
 */
public function testValidLogin($hashs) {
	foreach($hashs as $hash) {
		$this->assertTrue(verifyLoginPassword("Easy_Password", $hash));
		$this->assertFalse(verifyLoginPassword("Wrong_Password", $hash));
	}

}
</pre>
			</p>
			<p>
				This test is given a list of hashes from a previous test.
				These hashes are all salted hashes with the password "Easy_Password".
				Here we test the function <code>verifyLoginPassword</code> and pass it a valid and invalid password.
				We use <code>assertTrue</code> and <code>assertFalse</code> to check if the function returns the expected value.
				Any failure in assertion will cause this test to fail and report back the expected and actual value.
			</p>

		<h2>Coding Standards</h2>
			<p>
				While programming this website we tried to, for the most part, adheer to PSR-1 basic coding standards.
				You can find the PSR-1 standards <a href="http://www.php-fig.org/psr/psr-1/">online</a>.
			</p>

		<h2> 404 page </h2>

		<p>
			We have used a <code>.htaccess</code> page to ensure that any people who visit a URL that is not found on our webserver get a more helpful screen.
			Below is the content of the <code>.htaccess</code> page.
		</p>

		<pre>ErrorDocument 404 /comp6205/website/404.php</pre>

		<h3>Before adding .htaccess page</h3>
		<img class="img-responsive" src="images/not_found_bad.png" />

		<h3>After adding .htaccess page</h3>
		<img class="img-responsive" src="images/not_found_good.png" />

		<p>
			This will hopefully mean that they do not get put off by the default 404 page and it points them at a page that does exist.
		</p>

		<h2> Dynamic templates (hiding/showing content based on user) </h2>
		<h2> AJAX: reload page to dynamically update transactions list </h2>
		<h2> PDF Creation, Chris is a wizzard </h2>
		<h2> Disable access to guessable pages such as admin.php </h2>
		<h2> Password hashing and salting </h2>

		<p>
			To keep the users password secure we have decided we will hash and salt the passwords.
			The three functions that deal with this are in <code>/inc/auth.php</code>.
		</p>
		<p>
			We use the PHP <code>crypt($password, $salt)</code> function to properly hash the passwords and use blowfish hashing.
			This ensures that a users password is not stored in plaintext and as there is a salt used it makes bruteforcing of passwords much trickier.
		</p>
		<p>
			Therefore passwords are stored in the database like <code>$2y$10$4cd8ef6781c5e9e99d0a7ulXV3QNdg2gFIhcSndVMDRgHZVxVGodW</code>.
		</p>

		<h2>CSRF - Not yet implemented</h2>

		<h2>Linking to external JS and not ours</h2>

		<p>
			Where possible we have linked to the Google hosted libraries we have used.

			In <code>/inc/header.php</code> we link to the jQuery library hosted by Google.
		</p>

		<pre>&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"&gt;&lt;/script&gt;</pre>
		<p>
			This has a number of added benefits:
			<ul>
				<li>
					Google will be able to serve these large files much faster than we can.
					This is because they will have a large number of local servers and using IP anycast.
					These servers will also likely be much faster than ours due to their large data centers.
				</li>
				<li>
					This reduces the amount of data to be loaded off our site and improves loading time as browsers normally will only load a certain number of resources from one domain at a time.
				</li>
				<li>
					There are caching benefits as if a user has visited a website this includes jQuery from the Google CDN previously it will load this page from the cache speeding up pageload time.
				</li>
				<li>
					Google provide http and https versions of this file and the URL we have linked to does not start with a protocol definintion.
					Instead we use <code> src="//ajax.googleapis.com/...</code>.
					This means that it will use whatever protocol the page uses it will request the content as.
					This stops us having to write code to dynamically determine what protocol we are using or serving insecure http content alongside secured https content.
				</li>
			</ul>
			This reduces the amount of data to be loaded off our site and improves loading time as browsers normally will only load a certain number of resources from one domain at a time.

			This also has caching benefits as if a user has visited a website this includes jQuery from the Google CDN previously it will load this page from the cache speeding up pageload time.
		</p>

	</div>

</div><!-- /.container -->

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery-1.11.1.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>
